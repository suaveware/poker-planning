import{S as ee,i as te,s as le,t as S,g as M,f as z,h as L,d as y,e as R,c as C,a as j,b as E,U as f,H as A,P as ae,a5 as ne,Z as be,k as T,j as se,n as B,m as re,D as v,o as oe,x as O,u as q,v as ie,a3 as we,w as ce,L as ke,M as ye,A as De,a8 as Re,r as ue,a9 as Ce}from"../chunks/vendor-9e8ed699.js";import{s as I,i as je}from"../chunks/state-1fb3aff6.js";function fe(t){let e;return{c(){e=S(t[0])},l(l){e=M(l,t[0])},m(l,a){z(l,e,a)},p(l,a){a&1&&L(e,l[0])},d(l){l&&y(e)}}}function Ee(t){let e,l,a,r=!t[1]&&fe(t);return{c(){e=R("button"),r&&r.c(),this.h()},l(n){e=C(n,"BUTTON",{class:!0});var c=j(e);r&&r.l(c),c.forEach(y),this.h()},h(){E(e,"class","btn btn-primary text-primary-content hover:border-primary-content border-primary-content hover:border-4 border-4 h-40 w-24 rounded-xl text-6xl flex items-center justify-center shadow-md svelte-wumpgz"),f(e,"facedown",t[1]),f(e,"pattern-yyy",t[2]==="yyy"),f(e,"pattern-jigsaw",t[2]==="jigsaw"),f(e,"pattern-piano",t[2]==="piano"),f(e,"pattern-food",t[2]==="food"),f(e,"pattern-kiwi",t[2]==="kiwi"),f(e,"pattern-steelbeams",t[2]==="steelbeams"),f(e,"pattern-brickwall",t[2]==="brickwall"),f(e,"pattern-bubbles",t[2]==="bubbles"),f(e,"pattern-skulls",t[2]==="skulls")},m(n,c){z(n,e,c),r&&r.m(e,null),l||(a=A(e,"click",t[3]),l=!0)},p(n,[c]){n[1]?r&&(r.d(1),r=null):r?r.p(n,c):(r=fe(n),r.c(),r.m(e,null)),c&2&&f(e,"facedown",n[1]),c&4&&f(e,"pattern-yyy",n[2]==="yyy"),c&4&&f(e,"pattern-jigsaw",n[2]==="jigsaw"),c&4&&f(e,"pattern-piano",n[2]==="piano"),c&4&&f(e,"pattern-food",n[2]==="food"),c&4&&f(e,"pattern-kiwi",n[2]==="kiwi"),c&4&&f(e,"pattern-steelbeams",n[2]==="steelbeams"),c&4&&f(e,"pattern-brickwall",n[2]==="brickwall"),c&4&&f(e,"pattern-bubbles",n[2]==="bubbles"),c&4&&f(e,"pattern-skulls",n[2]==="skulls")},i:ae,o:ae,d(n){n&&y(e),r&&r.d(),l=!1,a()}}}function Ie(t,e,l){let a;ne(t,I,s=>l(4,a=s));let{value:r=0}=e,{isFaceDown:n=!1}=e,{pattern:c=a==null?void 0:a.cardPattern}=e;function m(s){be.call(this,t,s)}return t.$$set=s=>{"value"in s&&l(0,r=s.value),"isFaceDown"in s&&l(1,n=s.isFaceDown),"pattern"in s&&l(2,c=s.pattern)},[r,n,c,m]}class de extends ee{constructor(e){super();te(this,e,Ie,Ee,le,{value:0,isFaceDown:1,pattern:2})}}function he(t,e,l){const a=t.slice();return a[11]=e[l],a}function me(t,e,l){const a=t.slice();return a[14]=e[l][0],a[15]=e[l][1].playerName,a[11]=e[l][1].value,a[16]=e[l][1].pattern,a}function pe(t,e){var D;let l,a,r=e[15]+"",n,c,m,s,d,g;return s=new de({props:{value:e[11],pattern:e[16],isFaceDown:!((D=e[1])==null?void 0:D.currentRoom.showCards)}}),{key:t,first:null,c(){l=R("div"),a=R("div"),n=S(r),c=T(),m=R("span"),se(s.$$.fragment),d=T(),this.h()},l(b){l=C(b,"DIV",{class:!0});var w=j(l);a=C(w,"DIV",{});var u=j(a);n=M(u,r),u.forEach(y),c=B(w),m=C(w,"SPAN",{class:!0});var p=j(m);re(s.$$.fragment,p),p.forEach(y),d=B(w),w.forEach(y),this.h()},h(){E(m,"class","transform scale-75"),E(l,"class","flex flex-col items-center"),this.first=l},m(b,w){z(b,l,w),v(l,a),v(a,n),v(l,c),v(l,m),oe(s,m,null),v(l,d),g=!0},p(b,w){var p;e=b,(!g||w&1)&&r!==(r=e[15]+"")&&L(n,r);const u={};w&1&&(u.value=e[11]),w&1&&(u.pattern=e[16]),w&2&&(u.isFaceDown=!((p=e[1])==null?void 0:p.currentRoom.showCards)),s.$set(u)},i(b){g||(O(s.$$.fragment,b),g=!0)},o(b){q(s.$$.fragment,b),g=!1},d(b){b&&y(l),ie(s)}}}function _e(t){let e,l,a,r,n,c;l=new de({props:{value:t[11]}});function m(){return t[8](t[11])}return{c(){e=R("div"),se(l.$$.fragment),a=T(),this.h()},l(s){e=C(s,"DIV",{class:!0});var d=j(e);re(l.$$.fragment,d),a=B(d),d.forEach(y),this.h()},h(){var s,d;E(e,"class","transform transition-all"),f(e,"scale-110",((s=t[2])==null?void 0:s.value)===t[11]),f(e,"-translate-y-4",((d=t[2])==null?void 0:d.value)===t[11])},m(s,d){z(s,e,d),oe(l,e,null),v(e,a),r=!0,n||(c=A(e,"click",m),n=!0)},p(s,d){var g,D;t=s,d&12&&f(e,"scale-110",((g=t[2])==null?void 0:g.value)===t[11]),d&12&&f(e,"-translate-y-4",((D=t[2])==null?void 0:D.value)===t[11])},i(s){r||(O(l.$$.fragment,s),r=!0)},o(s){q(l.$$.fragment,s),r=!1},d(s){s&&y(e),ie(l),n=!1,c()}}}function Ne(t){var X,Y;let e,l,a,r=((X=t[1])==null?void 0:X.currentRoom.name)+"",n,c,m,s,d,g,D=(((Y=t[1])==null?void 0:Y.currentRoom.showCards)?"Hide":"Reveal")+"",b,w,u,p=[],J=new Map,Z,N,K,G,Q,U=Object.entries(t[0]||{}).filter(ge);const W=o=>o[14];for(let o=0;o<U.length;o+=1){let i=me(t,U,o),_=W(i);J.set(_,p[o]=pe(_,i))}let V=t[3],h=[];for(let o=0;o<V.length;o+=1)h[o]=_e(he(t,V,o));const ve=o=>q(h[o],1,1,()=>{h[o]=null});return{c(){e=R("div"),l=R("div"),a=R("h1"),n=S(r),c=T(),m=R("button"),s=S("New round"),d=T(),g=R("button"),b=S(D),w=T(),u=R("div");for(let o=0;o<p.length;o+=1)p[o].c();Z=T(),N=R("div");for(let o=0;o<h.length;o+=1)h[o].c();this.h()},l(o){e=C(o,"DIV",{class:!0});var i=j(e);l=C(i,"DIV",{class:!0});var _=j(l);a=C(_,"H1",{class:!0});var H=j(a);n=M(H,r),H.forEach(y),c=B(_),m=C(_,"BUTTON",{class:!0});var k=j(m);s=M(k,"New round"),k.forEach(y),d=B(_),g=C(_,"BUTTON",{class:!0});var P=j(g);b=M(P,D),P.forEach(y),_.forEach(y),w=B(i),u=C(i,"DIV",{class:!0});var $=j(u);for(let F=0;F<p.length;F+=1)p[F].l($);$.forEach(y),Z=B(i),N=C(i,"DIV",{class:!0});var x=j(N);for(let F=0;F<h.length;F+=1)h[F].l(x);x.forEach(y),i.forEach(y),this.h()},h(){E(a,"class","text-2xl text-center font-bold"),E(m,"class","btn btn-secondary btn-outline"),E(g,"class","btn btn-secondary"),E(l,"class","text-2xl justify-center items-center col-span-full row-start-1 lg:items-stretch lg:col-start-2 lg:col-span-2 lg:flex-col lg:justify-start gap-4 flex sticky py-8 top-16 bg-base-200 z-40"),E(u,"class","text-2xl col-span-full row-start-2 grid-cols-2 px-6 sm:px-10 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-4 lg:col-start-4 lg:col-end-10 lg:row-start-1 xl:col-start-4 xl:col-end-12 grid justify-start"),E(N,"class","flex col-span-full sticky bottom-0 space-x-4 w-full overflow-x-scroll overflow-y-visible py-8 px-8 mt-auto"),E(e,"class","w-full grid items-start grid-cols-1 lg:grid-cols-10 lg:pt-12 xl:grid-cols-12 gap-6 max-w-screen-xl mx-auto flex-grow")},m(o,i){z(o,e,i),v(e,l),v(l,a),v(a,n),v(l,c),v(l,m),v(m,s),v(l,d),v(l,g),v(g,b),v(e,w),v(e,u);for(let _=0;_<p.length;_+=1)p[_].m(u,null);v(e,Z),v(e,N);for(let _=0;_<h.length;_+=1)h[_].m(N,null);K=!0,G||(Q=[A(a,"click",t[6]),A(m,"click",t[6]),A(g,"click",t[5])],G=!0)},p(o,[i]){var _,H;if((!K||i&2)&&r!==(r=((_=o[1])==null?void 0:_.currentRoom.name)+"")&&L(n,r),(!K||i&2)&&D!==(D=(((H=o[1])==null?void 0:H.currentRoom.showCards)?"Hide":"Reveal")+"")&&L(b,D),i&3&&(U=Object.entries(o[0]||{}).filter(ge),ue(),p=we(p,i,W,1,o,U,J,u,Ce,pe,null,me),ce()),i&28){V=o[3];let k;for(k=0;k<V.length;k+=1){const P=he(o,V,k);h[k]?(h[k].p(P,i),O(h[k],1)):(h[k]=_e(P),h[k].c(),O(h[k],1),h[k].m(N,null))}for(ue(),k=V.length;k<h.length;k+=1)ve(k);ce()}},i(o){if(!K){for(let i=0;i<U.length;i+=1)O(p[i]);for(let i=0;i<V.length;i+=1)O(h[i]);K=!0}},o(o){for(let i=0;i<p.length;i+=1)q(p[i]);h=h.filter(Boolean);for(let i=0;i<h.length;i+=1)q(h[i]);K=!1},d(o){o&&y(e);for(let i=0;i<p.length;i+=1)p[i].d();ke(h,o),G=!1,ye(Q)}}}const Be=async({page:t})=>({props:t.params}),ge=([t])=>t!=="placeholder";function Ve(t,e,l){let a,r,n;ne(t,I,u=>l(1,n=u));let c=null,m=je()&&localStorage.getItem("id");const s=[0,1,2,3,5,8,13,21,34,"?","\u2615"];let{roomKey:d=""}=e;De(()=>{I.loadRoom(d),c=setInterval(I.refreshCurrentRoom.bind(I),2e3)}),Re(()=>{clearInterval(c)});const g=u=>{I.chooseCard(u)},D=()=>{I.toggleRevealCards()},b=()=>{I.newRound()},w=u=>g(u);return t.$$set=u=>{"roomKey"in u&&l(7,d=u.roomKey)},t.$$.update=()=>{t.$$.dirty&2&&l(0,a=n==null?void 0:n.currentRoom.rounds[n.currentRoom.rounds.length-1]),t.$$.dirty&1&&l(2,r=a==null?void 0:a[m])},[a,n,r,s,g,D,b,d,w]}class Ke extends ee{constructor(e){super();te(this,e,Ve,Ne,le,{roomKey:7})}}export{Ke as default,Be as load};
