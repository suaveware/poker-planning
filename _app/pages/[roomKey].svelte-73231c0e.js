import{S as W,i as X,s as Y,t as H,g as M,f as S,h as A,d as k,e as C,c as R,a as j,b as E,V as f,H as P,Q as Z,N as $,_ as he,k as F,j as x,n as T,m as ee,D as y,o as te,x as B,u as U,v as le,a4 as me,w as ae,L as pe,M as _e,A as ge,a8 as ve,r as ne,a9 as be}from"../chunks/vendor-227c15ea.js";import{s as I,i as we}from"../chunks/state-2e403f56.js";function se(t){let e;return{c(){e=H(t[0])},l(l){e=M(l,t[0])},m(l,a){S(l,e,a)},p(l,a){a&1&&A(e,l[0])},d(l){l&&k(e)}}}function ke(t){let e,l,a,r=!t[1]&&se(t);return{c(){e=C("button"),r&&r.c(),this.h()},l(n){e=R(n,"BUTTON",{class:!0});var o=j(e);r&&r.l(o),o.forEach(k),this.h()},h(){E(e,"class","btn btn-primary text-primary-content hover:border-primary-content border-primary-content hover:border-4 border-4 h-40 w-24 rounded-xl text-6xl flex items-center justify-center shadow-md svelte-wumpgz"),f(e,"facedown",t[1]),f(e,"pattern-yyy",t[2]==="yyy"),f(e,"pattern-jigsaw",t[2]==="jigsaw"),f(e,"pattern-piano",t[2]==="piano"),f(e,"pattern-food",t[2]==="food"),f(e,"pattern-kiwi",t[2]==="kiwi"),f(e,"pattern-steelbeams",t[2]==="steelbeams"),f(e,"pattern-brickwall",t[2]==="brickwall"),f(e,"pattern-bubbles",t[2]==="bubbles"),f(e,"pattern-skulls",t[2]==="skulls")},m(n,o){S(n,e,o),r&&r.m(e,null),l||(a=P(e,"click",t[3]),l=!0)},p(n,[o]){n[1]?r&&(r.d(1),r=null):r?r.p(n,o):(r=se(n),r.c(),r.m(e,null)),o&2&&f(e,"facedown",n[1]),o&4&&f(e,"pattern-yyy",n[2]==="yyy"),o&4&&f(e,"pattern-jigsaw",n[2]==="jigsaw"),o&4&&f(e,"pattern-piano",n[2]==="piano"),o&4&&f(e,"pattern-food",n[2]==="food"),o&4&&f(e,"pattern-kiwi",n[2]==="kiwi"),o&4&&f(e,"pattern-steelbeams",n[2]==="steelbeams"),o&4&&f(e,"pattern-brickwall",n[2]==="brickwall"),o&4&&f(e,"pattern-bubbles",n[2]==="bubbles"),o&4&&f(e,"pattern-skulls",n[2]==="skulls")},i:Z,o:Z,d(n){n&&k(e),r&&r.d(),l=!1,a()}}}function ye(t,e,l){let a;$(t,I,s=>l(4,a=s));let{value:r=0}=e,{isFaceDown:n=!1}=e,{pattern:o=a==null?void 0:a.cardPattern}=e;function _(s){he.call(this,t,s)}return t.$$set=s=>{"value"in s&&l(0,r=s.value),"isFaceDown"in s&&l(1,n=s.isFaceDown),"pattern"in s&&l(2,o=s.pattern)},[r,n,o,_]}class re extends W{constructor(e){super();X(this,e,ye,ke,Y,{value:0,isFaceDown:1,pattern:2})}}function oe(t,e,l){const a=t.slice();return a[11]=e[l],a}function ie(t,e,l){const a=t.slice();return a[14]=e[l][0],a[15]=e[l][1].playerName,a[11]=e[l][1].value,a[16]=e[l][1].pattern,a}function ce(t,e){var m;let l,a,r=e[15]+"",n,o,_,s,d,p;return s=new re({props:{value:e[11],pattern:e[16],isFaceDown:!((m=e[1])==null?void 0:m.currentRoom.showCards)}}),{key:t,first:null,c(){l=C("div"),a=C("div"),n=H(r),o=F(),_=C("span"),x(s.$$.fragment),d=F(),this.h()},l(w){l=R(w,"DIV",{class:!0});var g=j(l);a=R(g,"DIV",{});var u=j(a);n=M(u,r),u.forEach(k),o=T(g),_=R(g,"SPAN",{class:!0});var D=j(_);ee(s.$$.fragment,D),D.forEach(k),d=T(g),g.forEach(k),this.h()},h(){E(_,"class","transform scale-75"),E(l,"class","flex flex-col items-center"),this.first=l},m(w,g){S(w,l,g),y(l,a),y(a,n),y(l,o),y(l,_),te(s,_,null),y(l,d),p=!0},p(w,g){var D;e=w,(!p||g&1)&&r!==(r=e[15]+"")&&A(n,r);const u={};g&1&&(u.value=e[11]),g&1&&(u.pattern=e[16]),g&2&&(u.isFaceDown=!((D=e[1])==null?void 0:D.currentRoom.showCards)),s.$set(u)},i(w){p||(B(s.$$.fragment,w),p=!0)},o(w){U(s.$$.fragment,w),p=!1},d(w){w&&k(l),le(s)}}}function ue(t){let e,l,a,r,n,o;l=new re({props:{value:t[11]}});function _(){return t[8](t[11])}return{c(){e=C("div"),x(l.$$.fragment),a=F(),this.h()},l(s){e=R(s,"DIV",{class:!0});var d=j(e);ee(l.$$.fragment,d),a=T(d),d.forEach(k),this.h()},h(){var s,d;E(e,"class","transform transition-all"),f(e,"scale-110",((s=t[2])==null?void 0:s.value)===t[11]),f(e,"-translate-y-4",((d=t[2])==null?void 0:d.value)===t[11])},m(s,d){S(s,e,d),te(l,e,null),y(e,a),r=!0,n||(o=P(e,"click",_),n=!0)},p(s,d){var p,m;t=s,d&12&&f(e,"scale-110",((p=t[2])==null?void 0:p.value)===t[11]),d&12&&f(e,"-translate-y-4",((m=t[2])==null?void 0:m.value)===t[11])},i(s){r||(B(l.$$.fragment,s),r=!0)},o(s){U(l.$$.fragment,s),r=!1},d(s){s&&k(e),le(l),n=!1,o()}}}function De(t){var Q;let e,l,a,r,n,o,_=(((Q=t[1])==null?void 0:Q.currentRoom.showCards)?"Hide":"Reveal")+"",s,d,p,m=[],w=new Map,g,u,D,z,q,K=Object.entries(t[0]||{}).filter(fe);const L=i=>i[14];for(let i=0;i<K.length;i+=1){let c=ie(t,K,i),v=L(c);w.set(v,m[i]=ce(v,c))}let N=t[3],h=[];for(let i=0;i<N.length;i+=1)h[i]=ue(oe(t,N,i));const de=i=>U(h[i],1,1,()=>{h[i]=null});return{c(){e=C("div"),l=C("div"),a=C("button"),r=H("New round"),n=F(),o=C("button"),s=H(_),d=F(),p=C("div");for(let i=0;i<m.length;i+=1)m[i].c();g=F(),u=C("div");for(let i=0;i<h.length;i+=1)h[i].c();this.h()},l(i){e=R(i,"DIV",{class:!0});var c=j(e);l=R(c,"DIV",{class:!0});var v=j(l);a=R(v,"BUTTON",{class:!0});var b=j(a);r=M(b,"New round"),b.forEach(k),n=T(v),o=R(v,"BUTTON",{class:!0});var O=j(o);s=M(O,_),O.forEach(k),v.forEach(k),d=T(c),p=R(c,"DIV",{class:!0});var G=j(p);for(let V=0;V<m.length;V+=1)m[V].l(G);G.forEach(k),g=T(c),u=R(c,"DIV",{class:!0});var J=j(u);for(let V=0;V<h.length;V+=1)h[V].l(J);J.forEach(k),c.forEach(k),this.h()},h(){E(a,"class","btn btn-secondary btn-outline"),E(o,"class","btn btn-secondary"),E(l,"class","text-2xl justify-center col-span-full row-start-1 lg:col-start-2 lg:col-span-2 lg:flex-col lg:justify-start gap-4 flex sticky py-8 top-16 bg-base-200 z-40"),E(p,"class","text-2xl col-span-full row-start-2 grid-cols-2 px-6 sm:px-10 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-4 lg:col-start-4 lg:col-end-10 lg:row-start-1 xl:col-start-4 xl:col-end-12 grid justify-start"),E(u,"class","flex col-span-full sticky bottom-0 space-x-4 w-full overflow-x-scroll overflow-y-visible py-8 px-8 mt-auto"),E(e,"class","w-full grid items-start grid-cols-1 lg:grid-cols-10 lg:pt-12 xl:grid-cols-12 gap-6 max-w-screen-2xl mx-auto flex-grow")},m(i,c){S(i,e,c),y(e,l),y(l,a),y(a,r),y(l,n),y(l,o),y(o,s),y(e,d),y(e,p);for(let v=0;v<m.length;v+=1)m[v].m(p,null);y(e,g),y(e,u);for(let v=0;v<h.length;v+=1)h[v].m(u,null);D=!0,z||(q=[P(a,"click",t[6]),P(o,"click",t[5])],z=!0)},p(i,[c]){var v;if((!D||c&2)&&_!==(_=(((v=i[1])==null?void 0:v.currentRoom.showCards)?"Hide":"Reveal")+"")&&A(s,_),c&3&&(K=Object.entries(i[0]||{}).filter(fe),ne(),m=me(m,c,L,1,i,K,w,p,be,ce,null,ie),ae()),c&28){N=i[3];let b;for(b=0;b<N.length;b+=1){const O=oe(i,N,b);h[b]?(h[b].p(O,c),B(h[b],1)):(h[b]=ue(O),h[b].c(),B(h[b],1),h[b].m(u,null))}for(ne(),b=N.length;b<h.length;b+=1)de(b);ae()}},i(i){if(!D){for(let c=0;c<K.length;c+=1)B(m[c]);for(let c=0;c<N.length;c+=1)B(h[c]);D=!0}},o(i){for(let c=0;c<m.length;c+=1)U(m[c]);h=h.filter(Boolean);for(let c=0;c<h.length;c+=1)U(h[c]);D=!1},d(i){i&&k(e);for(let c=0;c<m.length;c+=1)m[c].d();pe(h,i),z=!1,_e(q)}}}const Ee=async({page:t})=>({props:t.params}),fe=([t])=>t!=="placeholder";function Ce(t,e,l){let a,r,n;$(t,I,u=>l(1,n=u));let o=null,_=we()&&localStorage.getItem("id");const s=[0,1,2,3,5,8,13,21,34,"?","\u2615"];let{roomKey:d=""}=e;ge(()=>{I.loadRoom(d),o=setInterval(I.refreshCurrentRoom.bind(I),2e3)}),ve(()=>{clearInterval(o)});const p=u=>{I.chooseCard(u)},m=()=>{I.toggleRevealCards()},w=()=>{I.newRound()},g=u=>p(u);return t.$$set=u=>{"roomKey"in u&&l(7,d=u.roomKey)},t.$$.update=()=>{t.$$.dirty&2&&l(0,a=n==null?void 0:n.currentRoom.rounds[n.currentRoom.rounds.length-1]),t.$$.dirty&1&&l(2,r=a==null?void 0:a[_])},[a,n,r,s,p,m,w,d,g]}class Ie extends W{constructor(e){super();X(this,e,Ce,De,Y,{roomKey:7})}}export{Ie as default,Ee as load};
