import{S as x,i as ee,s as te,t as A,g as q,f as j,h as L,d as _,e as E,c as I,a as N,b as V,V as h,H as Q,Q as J,N as le,_ as be,k as K,j as ae,n as O,m as ne,D,o as se,a2 as ve,a3 as ke,x as S,u as z,v as re,a5 as we,w as oe,L as ge,M as ye,A as Re,a8 as Ce,a4 as De,r as ie,a9 as je}from"../chunks/vendor-9122012f.js";import{s as B,i as Ee}from"../chunks/state-baa34d67.js";function ue(t){let e;return{c(){e=A(t[0])},l(l){e=q(l,t[0])},m(l,s){j(l,e,s)},p(l,s){s&1&&L(e,l[0])},d(l){l&&_(e)}}}function Ie(t){let e,l,s,u=!t[1]&&ue(t);return{c(){e=E("button"),u&&u.c(),this.h()},l(n){e=I(n,"BUTTON",{class:!0});var f=N(e);u&&u.l(f),f.forEach(_),this.h()},h(){V(e,"class","btn btn-primary text-primary-content hover:border-primary-content border-primary-content hover:border-4 border-4 h-40 w-24 rounded-xl text-6xl flex items-center justify-center shadow-md svelte-wumpgz"),h(e,"facedown",t[1]),h(e,"pattern-yyy",t[2]==="yyy"),h(e,"pattern-jigsaw",t[2]==="jigsaw"),h(e,"pattern-piano",t[2]==="piano"),h(e,"pattern-food",t[2]==="food"),h(e,"pattern-kiwi",t[2]==="kiwi"),h(e,"pattern-steelbeams",t[2]==="steelbeams"),h(e,"pattern-brickwall",t[2]==="brickwall"),h(e,"pattern-bubbles",t[2]==="bubbles"),h(e,"pattern-skulls",t[2]==="skulls")},m(n,f){j(n,e,f),u&&u.m(e,null),l||(s=Q(e,"click",t[3]),l=!0)},p(n,[f]){n[1]?u&&(u.d(1),u=null):u?u.p(n,f):(u=ue(n),u.c(),u.m(e,null)),f&2&&h(e,"facedown",n[1]),f&4&&h(e,"pattern-yyy",n[2]==="yyy"),f&4&&h(e,"pattern-jigsaw",n[2]==="jigsaw"),f&4&&h(e,"pattern-piano",n[2]==="piano"),f&4&&h(e,"pattern-food",n[2]==="food"),f&4&&h(e,"pattern-kiwi",n[2]==="kiwi"),f&4&&h(e,"pattern-steelbeams",n[2]==="steelbeams"),f&4&&h(e,"pattern-brickwall",n[2]==="brickwall"),f&4&&h(e,"pattern-bubbles",n[2]==="bubbles"),f&4&&h(e,"pattern-skulls",n[2]==="skulls")},i:J,o:J,d(n){n&&_(e),u&&u.d(),l=!1,s()}}}function Ne(t,e,l){let s;le(t,B,r=>l(4,s=r));let{value:u=0}=e,{isFaceDown:n=!1}=e,{pattern:f=s==null?void 0:s.cardPattern}=e;function p(r){be.call(this,t,r)}return t.$$set=r=>{"value"in r&&l(0,u=r.value),"isFaceDown"in r&&l(1,n=r.isFaceDown),"pattern"in r&&l(2,f=r.pattern)},[u,n,f,p]}class fe extends x{constructor(e){super();ee(this,e,Ne,Ie,te,{value:0,isFaceDown:1,pattern:2})}}function ce(t,e,l){const s=t.slice();return s[11]=e[l],s}function he(t,e,l){const s=t.slice();return s[14]=e[l][0],s[15]=e[l][1].playerName,s[11]=e[l][1].value,s[16]=e[l][1].pattern,s}function de(t,e){var g;let l,s,u=e[15]+"",n,f,p,r,d,v,y=J,R;return r=new fe({props:{value:e[11],pattern:e[16],isFaceDown:!((g=e[1])==null?void 0:g.currentRoom.showCards)}}),{key:t,first:null,c(){l=E("div"),s=E("div"),n=A(u),f=K(),p=E("span"),ae(r.$$.fragment),d=K(),this.h()},l(i){l=I(i,"DIV",{class:!0});var k=N(l);s=I(k,"DIV",{});var C=N(s);n=q(C,u),C.forEach(_),f=O(k),p=I(k,"SPAN",{class:!0});var w=N(p);ne(r.$$.fragment,w),w.forEach(_),d=O(k),k.forEach(_),this.h()},h(){V(p,"class","transform scale-75"),V(l,"class","flex flex-col items-center"),this.first=l},m(i,k){j(i,l,k),D(l,s),D(s,n),D(l,f),D(l,p),se(r,p,null),D(l,d),R=!0},p(i,k){var w;e=i,(!R||k&1)&&u!==(u=e[15]+"")&&L(n,u);const C={};k&1&&(C.value=e[11]),k&1&&(C.pattern=e[16]),k&2&&(C.isFaceDown=!((w=e[1])==null?void 0:w.currentRoom.showCards)),r.$set(C)},r(){v=l.getBoundingClientRect()},f(){ve(l),y()},a(){y(),y=ke(l,v,De,{})},i(i){R||(S(r.$$.fragment,i),R=!0)},o(i){z(r.$$.fragment,i),R=!1},d(i){i&&_(l),re(r)}}}function me(t){let e,l,s,u,n,f;l=new fe({props:{value:t[11]}});function p(){return t[8](t[11])}return{c(){e=E("div"),ae(l.$$.fragment),s=K(),this.h()},l(r){e=I(r,"DIV",{class:!0});var d=N(e);ne(l.$$.fragment,d),s=O(d),d.forEach(_),this.h()},h(){var r,d;V(e,"class","flex-shrink-0 transform transition-all"),h(e,"scale-110",((r=t[2])==null?void 0:r.value)===t[11]),h(e,"-translate-y-4",((d=t[2])==null?void 0:d.value)===t[11])},m(r,d){j(r,e,d),se(l,e,null),D(e,s),u=!0,n||(f=Q(e,"click",p),n=!0)},p(r,d){var v,y;t=r,d&12&&h(e,"scale-110",((v=t[2])==null?void 0:v.value)===t[11]),d&12&&h(e,"-translate-y-4",((y=t[2])==null?void 0:y.value)===t[11])},i(r){u||(S(l.$$.fragment,r),u=!0)},o(r){z(l.$$.fragment,r),u=!1},d(r){r&&_(e),re(l),n=!1,f()}}}function Ve(t){var Y,Z;let e,l=((Y=t[1])==null?void 0:Y.currentRoom.name)+"",s,u,n,f,p=(((Z=t[1])==null?void 0:Z.currentRoom.showCards)?"Hide":"Reveal")+"",r,d,v,y,R,g,i=[],k=new Map,C,w,H,G,W,U=Object.entries(t[0]||{}).filter(_e);const X=a=>a[14];for(let a=0;a<U.length;a+=1){let o=he(t,U,a),b=X(o);k.set(b,i[a]=de(b,o))}let F=t[3],m=[];for(let a=0;a<F.length;a+=1)m[a]=me(ce(t,F,a));const pe=a=>z(m[a],1,1,()=>{m[a]=null});return{c(){e=E("h1"),s=A(l),u=K(),n=E("div"),f=E("button"),r=A(p),d=K(),v=E("button"),y=A("New round"),R=K(),g=E("div");for(let a=0;a<i.length;a+=1)i[a].c();C=K(),w=E("div");for(let a=0;a<m.length;a+=1)m[a].c();this.h()},l(a){e=I(a,"H1",{class:!0});var o=N(e);s=q(o,l),o.forEach(_),u=O(a),n=I(a,"DIV",{class:!0});var b=N(n);f=I(b,"BUTTON",{class:!0});var M=N(f);r=q(M,p),M.forEach(_),d=O(b),v=I(b,"BUTTON",{class:!0});var c=N(v);y=q(c,"New round"),c.forEach(_),b.forEach(_),R=O(a),g=I(a,"DIV",{class:!0});var P=N(g);for(let T=0;T<i.length;T+=1)i[T].l(P);P.forEach(_),C=O(a),w=I(a,"DIV",{class:!0});var $=N(w);for(let T=0;T<m.length;T+=1)m[T].l($);$.forEach(_),this.h()},h(){V(e,"class","text-6xl text-center pt-4 mb-8"),V(f,"class","btn btn-secondary mb-20"),V(v,"class","btn btn-secondary mb-20"),V(n,"class","text-2xl flex space-x-2 justify-center"),V(g,"class","text-2xl flex space-x-2 justify-center"),V(w,"class","flex space-x-4 w-full overflow-x-scroll justify-center fixed bottom-0 px-10 py-8")},m(a,o){j(a,e,o),D(e,s),j(a,u,o),j(a,n,o),D(n,f),D(f,r),D(n,d),D(n,v),D(v,y),j(a,R,o),j(a,g,o);for(let b=0;b<i.length;b+=1)i[b].m(g,null);j(a,C,o),j(a,w,o);for(let b=0;b<m.length;b+=1)m[b].m(w,null);H=!0,G||(W=[Q(f,"click",t[5]),Q(v,"click",t[6])],G=!0)},p(a,[o]){var b,M;if((!H||o&2)&&l!==(l=((b=a[1])==null?void 0:b.currentRoom.name)+"")&&L(s,l),(!H||o&2)&&p!==(p=(((M=a[1])==null?void 0:M.currentRoom.showCards)?"Hide":"Reveal")+"")&&L(r,p),o&3){U=Object.entries(a[0]||{}).filter(_e),ie();for(let c=0;c<i.length;c+=1)i[c].r();i=we(i,o,X,1,a,U,k,g,je,de,null,he);for(let c=0;c<i.length;c+=1)i[c].a();oe()}if(o&28){F=a[3];let c;for(c=0;c<F.length;c+=1){const P=ce(a,F,c);m[c]?(m[c].p(P,o),S(m[c],1)):(m[c]=me(P),m[c].c(),S(m[c],1),m[c].m(w,null))}for(ie(),c=F.length;c<m.length;c+=1)pe(c);oe()}},i(a){if(!H){for(let o=0;o<U.length;o+=1)S(i[o]);for(let o=0;o<F.length;o+=1)S(m[o]);H=!0}},o(a){for(let o=0;o<i.length;o+=1)z(i[o]);m=m.filter(Boolean);for(let o=0;o<m.length;o+=1)z(m[o]);H=!1},d(a){a&&_(e),a&&_(u),a&&_(n),a&&_(R),a&&_(g);for(let o=0;o<i.length;o+=1)i[o].d();a&&_(C),a&&_(w),ge(m,a),G=!1,ye(W)}}}const Ke=async({page:t})=>({props:t.params}),_e=([t])=>t!=="placeholder";function Be(t,e,l){let s,u,n;le(t,B,i=>l(1,n=i));let f=null,p=Ee()&&localStorage.getItem("id");const r=[0,1,2,3,5,8,13,21,34,"?","\u2615"];let{roomKey:d=""}=e;Re(()=>{B.loadRoom(d),f=setInterval(B.refreshCurrentRoom.bind(B),5e3)}),Ce(()=>{clearInterval(f)});const v=i=>{B.chooseCard(i)},y=()=>{B.toggleRevealCards()},R=()=>{B.newRound()},g=i=>v(i);return t.$$set=i=>{"roomKey"in i&&l(7,d=i.roomKey)},t.$$.update=()=>{t.$$.dirty&2&&l(0,s=n==null?void 0:n.currentRoom.rounds[n.currentRoom.rounds.length-1]),t.$$.dirty&1&&l(2,u=s==null?void 0:s[p])},[s,n,u,r,v,y,R,d,g]}class Oe extends x{constructor(e){super();ee(this,e,Be,Ve,te,{roomKey:7})}}export{Oe as default,Ke as load};
